{"version":3,"sources":["functions/index.js","context/index.js","components/SVG.js","components/WebPlayer.js","components/visualizer/Box.js","components/visualizer/index.js","App.js","serviceWorker.js","index.js","logo.svg"],"names":["id","token","a","axios","url","headers","Authorization","json","res","status","console","log","data","error","method","device_ids","WebPlayerContext","createContext","children","requestRef","useRef","useState","tokens","setTokens","player","setPlayer","loggedIn","setLoggedIn","connected","setConnected","device","setDevice","isPlaying","setIsPlaying","track","setTrack","currentBarWidth","setCurrentBarWidth","features","undefined","analysis","audioDetails","setAudioDetails","current","total","time","setTime","getSongTimeStamp","getCurrentState","then","position","duration","trackSongTime","t","cancelAnimationFrame","requestAnimationFrame","useEffect","current_track","getAudioAnalysis","getAudioFeatures","length","Promise","resolve","window","Spotify","onSpotifyWebPlaybackSDKReady","Player","name","getOAuthToken","cb","volume","addListener","message","state","track_window","paused","device_id","setCurrentDevice","connect","Provider","value","gsap","registerPlugin","MorphSVGPlugin","StyledSVG","styled","svg","props","MorphPlayPauseSVG","pausePath","playPath","to","morphSVG","xmlns","viewBox","data-name","d","transform","fill","ref","style","visibility","StyledProgressbar","div","width","useContext","controlThumb","controlBar","timeRequestRef","setThumbStart","currentThumbPos","setCurrentThumbPos","setPrevThumbPos","setDragging","className","artists","onClick","previousTrack","icon","faFastBackward","newTime","seek","faUndoAlt","togglePlay","faRedoAlt","nextTrack","response","clearTimeout","timeout","faFastForward","draggable","onDragStart","e","clientX","onDrag","clientWidth","onDragEnd","mesh","setHover","active","setActive","segmentIndex","setSegmentIndex","from","segmentAnimation","setSegmentAnimation","up","down","useFrame","next","dur","segments","start","rotation","x","pitches","pitchToRotateIndex","y","z","animatedVals","useSpring","scale","pitchToScaleIndex","config","wobbly","onPointerOver","onPointerOut","args","attach","factor","color","boxes","yPerRow","Visualizer","camera","fov","orthographic","intensity","angle","penumbra","distance","map","Y","i","box","coordinate","quant","index","radius","Math","cos","PI","sin","getCirclePerimCoordinates","Box","App","uri","windowObjRef","setWindowObjRef","setProfile","location","href","closed","close","getProfile","prevState","checkCookies","b","cookies","document","cookie","split","forEach","includes","slice","setTimeout","display","open","openRequestedPopUp","WebPlayer","Boolean","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","module","exports"],"mappings":"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","file":"static/js/main.57433bd1.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nasync function getAudioAnalysis(id,token) {\r\n    try {\r\n        let res = await axios({\r\n            url: `https://api.spotify.com/v1/audio-analysis/${id}`,\r\n            headers: {\r\n                Authorization: `Bearer ${token}`\r\n            },\r\n            json: true\r\n        })\r\n\r\n        if (res.status) console.log('GET ANALYSIS STATUS: ', res.status)\r\n        console.log(\"THIS IS THE AUDIO ANALYSIS\", res.data);\r\n\r\n        return res.data\r\n    }\r\n\r\n    catch (err) {\r\n        console.error(err)\r\n    }\r\n}\r\n\r\nasync function getAudioFeatures(id,token) {\r\n    try {\r\n        let res = await axios({\r\n            url: `https://api.spotify.com/v1/audio-features/${id}`,\r\n            headers: {\r\n                Authorization: `Bearer ${token}`\r\n            },\r\n            json: true\r\n        })\r\n\r\n        if (res.status) console.log('GET FEATURES STATUS: ', res.status)\r\n        console.log(\"THIS IS THE AUDIO FEATURES\", res.data);\r\n\r\n        return res.data\r\n    }\r\n\r\n    catch (err) {\r\n        console.error(err)\r\n    }\r\n}\r\nasync function getProfile(token) {\r\n    try {\r\n        let res = await axios({\r\n            url: \"https://api.spotify.com/v1/me\",\r\n            headers: {\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n            json: true,\r\n        })\r\n\r\n        if (res.status) console.log('GET PROFILE STATUS: ', res.status)\r\n\r\n        return res.data\r\n    }\r\n    catch (err) {\r\n        console.error(err)\r\n    }\r\n}\r\n\r\nasync function setCurrentDevice(token, id) {\r\n    console.log(\"setting device...\");\r\n    let res\r\n    try {\r\n        res = await axios({\r\n            method: 'PUT',\r\n            url: `https://api.spotify.com/v1/me/player`,\r\n            headers: {\r\n                Authorization: `Bearer ${token}`\r\n            },\r\n            data: {\r\n                device_ids: [id],\r\n                // play: false\r\n            },\r\n            json: true\r\n        })\r\n\r\n        if (res.status) console.log('GET DEVICES STATUS: ', res.status)\r\n        console.log(\"THIS IS THE AVAILABLE DEVICES\", res.data);\r\n\r\n    }\r\n    \r\n    catch (err) {\r\n        console.error(err)\r\n        res = false\r\n    }\r\n\r\n    finally {\r\n        return res?.data\r\n    }\r\n}\r\n\r\nconst roundTo = (n, d=2) => +n.toFixed(d)\r\nconst randsgn = () => Math.pow(-1, Math.round(Math.random))\r\nconst rand = (max = 1, min = 0, d = 2) => roundTo(min + (max - min) * Math.random(), d)\r\n\r\nexport {getAudioAnalysis, getAudioFeatures, getProfile,setCurrentDevice, roundTo, randsgn, rand}","import React, { createContext, useEffect, useState, useRef } from 'react';\r\nimport axios from \"axios\";\r\nimport { getAudioAnalysis, getAudioFeatures, setCurrentDevice } from '../functions'\r\n\r\nexport const WebPlayerContext = createContext(null)\r\n\r\n\r\nexport default ({children}) => {\r\n\r\n    const requestRef = useRef(null)\r\n    \r\n    const [timeTracker, setTimeTracker] = useState(0)\r\n    const [tokens, setTokens] = useState([]);\r\n    const [player, setPlayer] = useState();\r\n    const [loggedIn, setLoggedIn] = useState(false);\r\n    const [connected, setConnected] = useState(false);\r\n    const [device, setDevice] = useState(false)\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [track,setTrack] = useState();\r\n    const [currentBarWidth, setCurrentBarWidth] = useState();\r\n\r\n    const [audioDetails, setAudioDetails] = useState({\r\n        features: undefined,\r\n        analysis: undefined\r\n    })\r\n    const [time, setTime] = useState({\r\n\t\tcurrent: 0,\r\n\t\ttotal: 0,\r\n    });\r\n    \r\n    const handleSDKLoaded = () => {\r\n        return new Promise((resolve) => {\r\n            if (window.Spotify) {\r\n                resolve();\r\n            } else {\r\n                window.onSpotifyWebPlaybackSDKReady = resolve;\r\n            }\r\n        });\r\n    }\r\n\r\n    const getSongTimeStamp = () => {\r\n        player.getCurrentState().then((res) => {\r\n            setTime(() => {\r\n                return {\r\n                    current: res.position,\r\n                    total: res.duration,\r\n                };\r\n            });\r\n            setCurrentBarWidth(res.position / res.duration);\r\n        })\r\n\r\n    }\r\n\r\n    const trackSongTime = t => {\r\n        // console.log(t);\r\n        if (!isPlaying) {\r\n            console.log(\"IT IS NOT PLAYING\");\r\n            requestRef.current = null;\r\n            return cancelAnimationFrame(requestRef.current);\r\n        }\r\n\r\n        if (isPlaying) {\r\n\r\n            getSongTimeStamp();\r\n            requestAnimationFrame(trackSongTime)\r\n        } \r\n    }\r\n\r\n    useEffect(() => {\r\n        if (requestRef.current == null) {\r\n            requestRef.current = requestAnimationFrame(trackSongTime)\r\n        }\r\n\r\n        return () => cancelAnimationFrame(requestRef.current)\r\n    }, [isPlaying])\r\n\r\n\r\n    useEffect(() => {\r\n        \r\n\t\tif (track) {\r\n            const { id } = track.current_track;\r\n            getSongTimeStamp();\r\n            getAudioAnalysis(id,tokens[0]).then((analysis) => getAudioFeatures(id,tokens[0]).then(features => setAudioDetails({features,analysis})))   \r\n        }\r\n        \r\n    }, [track]);\r\n\r\n    useEffect(() => {\r\n\r\n        if (tokens.length > 1) {\r\n            handleSDKLoaded().then(() => {\r\n                setPlayer(\r\n                    new window.Spotify.Player({\r\n                        name: 'Chromesthetics',\r\n                        getOAuthToken: cb => cb(tokens[0]),\r\n                        volume: .05\r\n                    })\r\n                )\r\n                setLoggedIn(true);\r\n            })\r\n        }\r\n    }, [tokens])\r\n\r\n    useEffect(() => {\r\n\r\n        if(player){\r\n            // Error handling\r\n            player.addListener('initialization_error', ({ message }) => { console.error(`init error: ${message}`); });\r\n            player.addListener('authentication_error', ({ message }) => { console.error(`auth error: ${message}`); });\r\n            player.addListener('account_error', ({ message }) => { console.error(`account error: ${message}`); });\r\n            player.addListener('playback_error', ({ message }) => { console.error(`play error: ${message}`); });\r\n\r\n            // Playback status updates\r\n            player.addListener('player_state_changed', state => {\r\n                console.log(\"*STATE*\", state);\r\n                if (state !== null) {\r\n                    if (!connected) {\r\n                        setConnected(true)\r\n                    }\r\n\r\n                    setTrack(state.track_window)\r\n                    setIsPlaying(!state.paused)\r\n                }\r\n                else {\r\n                    setConnected(false);\r\n                }\r\n\r\n            });\r\n\r\n            // Ready\r\n            player.addListener('ready', ({ device_id }) => {\r\n                console.log('Ready with Device ID', device_id);\r\n                if (!device) {\r\n                    setCurrentDevice(tokens[0], device_id).then((res) => {\r\n                        console.log(res);\r\n                        setDevice(res)\r\n                        // setIsPlaying(true)\r\n                    })\r\n                }\r\n            });\r\n\r\n            // Not Ready\r\n            player.addListener('not_ready', ({ device_id }) => {\r\n                console.log('Device ID has gone offline', device_id);\r\n                setConnected(false)\r\n            });\r\n\r\n            // Connect to the player!\r\n            player.connect().then(connected => {\r\n                setConnected(true)\r\n                console.log(connected);\r\n            });\r\n        }\r\n    }, [player])\r\n\r\n    return (\r\n        <WebPlayerContext.Provider value={{connected, loggedIn, tokens,setIsPlaying, isPlaying, player, setLoggedIn, setPlayer, setTokens, setConnected, track, audioDetails, time, setTime, device, currentBarWidth}}>\r\n            {children}\r\n        </WebPlayerContext.Provider>\r\n    )\r\n}","import React, { useRef, useState, useEffect } from \"react\";\r\nimport { gsap } from \"gsap\";\r\nimport { MorphSVGPlugin } from \"gsap/MorphSVGPlugin\";\r\nimport styled from \"styled-components\";\r\n\r\ngsap.registerPlugin(MorphSVGPlugin);\r\n\r\nconst StyledSVG = styled.svg`\r\n    transform: ${props => !props.isPlaying ? \"translate(-42.5%,-40%)\" : \"translate(-50%,-50%)\"};\r\n`\r\n\r\nconst MorphPlayPauseSVG = (props) => {\r\n\tconst pausePath = useRef();\r\n\tconst playPath = useRef();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!props.isPlaying) {\r\n\t\t\tgsap.to(pausePath.current, {\r\n\t\t\t\tmorphSVG: playPath.current,\r\n\t\t\t\tduration: 0.125,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tgsap.to(pausePath.current, {\r\n\t\t\t\tmorphSVG: pausePath.current,\r\n\t\t\t\tduration: 0.125,\r\n\t\t\t});\r\n\t\t}\r\n\t}, [props.isPlaying]);\r\n\treturn (\r\n\t\t<StyledSVG\r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t// width=\"31.5\"\r\n\t\t\t// height=\"31.5\"\r\n            viewBox=\"0 0 31.5 31.5\"\r\n            isPlaying={props.isPlaying}\r\n\t\t>\r\n\t\t\t<path\r\n\t\t\t\tid=\"Icon_awesome-pause\"\r\n\t\t\t\tdata-name=\"Icon awesome-pause\"\r\n\t\t\t\td=\"M10.125,33.68H3.375A3.376,3.376,0,0,1,0,30.3V5.555A3.376,3.376,0,0,1,3.375,2.18h6.75A3.376,3.376,0,0,1,13.5,5.555V30.3A3.376,3.376,0,0,1,10.125,33.68ZM31.5,30.3V5.555A3.376,3.376,0,0,0,28.125,2.18h-6.75A3.376,3.376,0,0,0,18,5.555V30.3a3.376,3.376,0,0,0,3.375,3.375h6.75A3.376,3.376,0,0,0,31.5,30.3Z\"\r\n\t\t\t\ttransform={\"translate(0 -2.18)\"}\r\n\t\t\t\tfill=\"#f5f5f5\"\r\n\t\t\t\tref={pausePath}\r\n\t\t\t/>\r\n\t\t\t<path\r\n\t\t\t\tid=\"Icon_awesome-play\"\r\n\t\t\t\tdata-name=\"Icon awesome-play\"\r\n\t\t\t\td=\"M29.841,13.209,5.091.406C3.08-.633,0,.376,0,2.947v25.6c0,2.307,2.862,3.7,5.091,2.541l24.751-12.8a2.775,2.775,0,0,0,0-5.082Z\"\r\n\t\t\t\ttransform=\"translate(0 -0.002)\"\r\n                fill=\"#fff\"\r\n                ref={playPath}\r\n\t\t\t\tstyle={{ visibility: \"hidden\" }}\r\n\t\t\t/>\r\n\r\n\t\t</StyledSVG>\r\n\t);\r\n};\r\n\r\nexport { MorphPlayPauseSVG };\r\n","import React, { useState, useRef, useContext, useEffect } from \"react\";\r\nimport { WebPlayerContext } from \"../context\";\r\nimport styled from \"styled-components\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n\tfaFastBackward,\r\n\tfaFastForward,\r\n\tfaUndoAlt,\r\n\tfaRedoAlt,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nimport { MorphPlayPauseSVG } from \"./SVG\";\r\n\r\n// transition: width .5s linear;\r\nconst StyledProgressbar = styled.div`\r\n\t.player--progressbar {\r\n\t\t&--current {\r\n\t\t\twidth: ${(props) => `${props.width * 100}%`};\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nlet timeout;\r\n\r\nexport default (props) => {\r\n\tconst {\r\n\t\tplayer,\r\n\t\tconnected,\r\n\t\tisPlaying,\r\n\t\tsetIsPlaying,\r\n\t\ttrack,\r\n\t\ttokens,\r\n\t\ttime,\r\n\t\tsetTime,\r\n\t\tdevice,\r\n\t\tcurrentBarWidth\r\n\t} = useContext(WebPlayerContext);\r\n\r\n\tconst controlThumb = useRef(null);\r\n\tconst controlBar = useRef(null);\r\n\tconst timeRequestRef = useRef();\r\n\tconst prevAnimTime = useRef();\r\n\tconst [thumbStart, setThumbStart] = useState();\r\n\tconst [currentThumbPos, setCurrentThumbPos] = useState();\r\n\tconst [prevThumbPos, setPrevThumbPos] = useState();\r\n\tconst [isDragging, setDragging] = useState(false);\r\n\r\n\t// const updateBarWidth = (animTime) => {\r\n\t// \t// console.log(timeRequestRef);\r\n\t// \t// console.log(animTime);\r\n\r\n\t// \tif (isPlaying && !isDragging && device) {\r\n\t// \t\tconsole.log(\"THE SONG IS PLAYING\");\r\n\r\n\t// \t\t// console.log(`Time before request: ${Date.now()}`);\r\n\t// \t\tplayer.getCurrentState().then((res) => {\r\n\r\n\r\n\t// \t\t\ttimeRequestRef.current = requestAnimationFrame(() =>\r\n\t// \t\t\t\tupdateBarWidth(res.position)\r\n\t// \t\t\t);\r\n\t// \t\t});\r\n\t// \t}\r\n\t// \tif (isDragging) {\r\n\t// \t\tplayer.pause();\r\n\t// \t} else {\r\n\t// \t\t// console.log(\"THE SONG IS *****NOT****** PLAYING\");\r\n\t// \t\ttimeRequestRef.current = requestAnimationFrame(() =>\r\n\t// \t\t\tupdateBarWidth(time.current)\r\n\t// \t\t);\r\n\t// \t}\r\n\t// };\r\n\r\n\t// useEffect(() => {\r\n\t// \ttimeRequestRef.current = requestAnimationFrame(() =>\r\n\t// \t\tupdateBarWidth(time.current)\r\n\t// \t);\r\n\r\n\t// \treturn () => cancelAnimationFrame(timeRequestRef.current);\r\n\t// }, [isPlaying]);\r\n\r\n\t// useEffect(() => {\r\n\t//     console.log(player);\r\n\r\n\t// \tif (isPlaying) {\r\n\t//         console.log(\"THE SONG IS PLAYING\")\r\n\t//         timeRequestRef.current = requestAnimationFrame(updateBarWidth)\r\n\t// \t\t// timeout = setTimeout(() => {\r\n\t// \t\t\t// setTime(() => {\r\n\t// \t\t\t// \treturn {\r\n\t// \t\t\t// \t\tcurrent: time.current + 500,\r\n\t// \t\t\t// \t\ttotal: time.total,\r\n\t// \t\t\t// \t};\r\n\t//             // });\r\n\t//             // setCurrentBarWidth(res.position / res.duration)\r\n\t// \t\t// }, 500);\r\n\t// \t} else {\r\n\t//         console.log(\"THE SONG IS *NOT* PLAYING\")\r\n\t//         return () => cancelAnimationFrame(timeRequestRef.current);\r\n\t//     }\r\n\t// }, [isPlaying, time]);\r\n\r\n\r\n\treturn (\r\n\t\t<main className=\"dashboard\">\r\n\t\t\t<div className=\"current\">\r\n\t\t\t\t{track && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<h2 className=\"current--song\">\r\n\t\t\t\t\t\t\t{track.current_track.name}\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t<h2 className=\"current--artist\">\r\n\t\t\t\t\t\t\t{track.current_track.artists[0].name}\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<section className=\"player\">\r\n\t\t\t\t<div className=\"player--controls\">\r\n\t\t\t\t\t<div className=\"player--controls--buttons\">\r\n\t\t\t\t\t\t<div className=\"player--skip-back player--controls--button__wrapper\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => player.previousTrack()}\r\n\t\t\t\t\t\t\t\tclassName=\"player--skip-back__button player--controls--button\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faFastBackward} />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"player--back-30 player--controls--button__wrapper\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tlet newTime;\r\n\t\t\t\t\t\t\t\t\tif (time.current <= 30000) {\r\n\t\t\t\t\t\t\t\t\t\tnewTime = 0;\r\n\t\t\t\t\t\t\t\t\t} else newTime = time.current - 30000;\r\n\t\t\t\t\t\t\t\t\tplayer.seek(newTime);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName=\"player--back-30__button player--controls--button\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<span className=\"thirty\">30</span>\r\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faUndoAlt} />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"player--play player--controls--button__wrapper\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t\t\t.togglePlay()\r\n\t\t\t\t\t\t\t\t\t\t.then(\r\n\t\t\t\t\t\t\t\t\t\t\t() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t!isPlaying &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tcancelAnimationFrame(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttimeRequestRef.current\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName=\"player--play__button player--controls--button\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{/* <FontAwesomeIcon icon={faPlay} ref={playIcon}/> */}\r\n\t\t\t\t\t\t\t\t<MorphPlayPauseSVG isPlaying={isPlaying} />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"player--forward-30 player--controls--button__wrapper\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\tplayer.seek(time.current + 30000)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tclassName=\"player--forward-30__button player--controls--button\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t\t\t\t<span className=\"thirty\">30</span>\r\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faRedoAlt} />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"player--skip-forward player--controls--button__wrapper\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\tplayer.nextTrack().then(() => {\r\n\t\t\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t\t\t\t.getCurrentState()\r\n\t\t\t\t\t\t\t\t\t\t\t.then((response) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetTime(() => ({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrent: response.position,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotal: response.duration,\r\n\t\t\t\t\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t\t\t\t\t\tclearTimeout(timeout);\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"THE NEW WIDTH: \",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttime.current / time.total\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tclassName=\"player--skip-forward__button player--controls--button\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faFastForward} />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<StyledProgressbar\r\n\t\t\t\t\t\tclassName=\"player--progressbar\"\r\n\t\t\t\t\t\tref={controlBar}\r\n\t\t\t\t\t\twidth={currentBarWidth}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div className=\"player--progressbar--full\"></div>\r\n\t\t\t\t\t\t<div className=\"player--progressbar--current\">\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tdraggable=\"true\"\r\n\t\t\t\t\t\t\t\t// onMouseDown={e => {\r\n\r\n\t\t\t\t\t\t\t\t// }}\r\n\r\n\t\t\t\t\t\t\t\tonDragStart={(e) => {\r\n\r\n\t\t\t\t\t\t\t\t\tsetThumbStart(e.clientX);\r\n\t\t\t\t\t\t\t\t\tsetCurrentThumbPos(e.clientX);\r\n\t\t\t\t\t\t\t\t\tsetPrevThumbPos(e.clientX);\r\n\t\t\t\t\t\t\t\t\tsetDragging(true);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonDrag={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetCurrentThumbPos(e.clientX);\r\n\t\t\t\t\t\t\t\t\tconst changeInWidth =\r\n\t\t\t\t\t\t\t\t\t\t(currentThumbPos - prevThumbPos) /\r\n\t\t\t\t\t\t\t\t\t\tcontrolBar.current.clientWidth;\r\n\r\n\t\t\t\t\t\t\t\t\tsetPrevThumbPos(currentThumbPos);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonDragEnd={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetDragging(false);\r\n\t\t\t\t\t\t\t\t\tplayer.seek(time.total * currentBarWidth);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tref={controlThumb}\r\n\t\t\t\t\t\t\t\tclassName=\"player--progressbar--current__thumb\"\r\n\t\t\t\t\t\t\t></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</StyledProgressbar>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t\t<div className=\"scales\">\r\n\t\t\t\t<div className=\"scales--item scales__volume\"></div>\r\n\t\t\t\t<div className=\"scales--item scales__zoom\"></div>\r\n\t\t\t</div>\r\n\t\t</main>\r\n\t);\r\n};\r\n","import React, {useRef, useEffect, useState} from 'react'\r\nimport { useFrame } from 'react-three-fiber'\r\nimport { useSpring, animated, config } from \"react-spring/three\";\r\nimport { MeshWobbleMaterial } from 'drei'\r\n\r\n\r\n\r\nexport default function(props) {\r\n\t// This reference will give us direct access to the mesh\r\n\tconst mesh = useRef();\r\n\t// Set up state for the hovered and active state\r\n\tconst [hovered, setHover] = useState(false);\r\n\tconst [active, setActive] = useState(false);\r\n\t// const {analysis,features} = props.audioDetails\r\n\t// Rotate mesh every frame, this is outside of React without overhead\r\n\tconst [tempo, setTempo] = useState();\r\n\tconst [segmentIndex, setSegmentIndex] = useState(0);\r\n\tconst [segmentAnimation, setSegmentAnimation] = useState({\r\n\t\tfrom: undefined,\r\n\t\tto: undefined,\r\n\t\tduration: 1,\r\n\t});\r\n\tconst [currentBeat, setCurrentBeat] = useState({\r\n\t\tup: 0,\r\n\t\tdown: 0,\r\n\t});\r\n\r\n\tconst { features, analysis } = props.audioDetails;\r\n\r\n\t// useEffect(() => {\r\n\r\n\t// }, [analysis])\r\n\r\n\t// console.log(config);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetSegmentIndex(0);\r\n\t}, [props.track?.current_track.id]);\r\n\r\n\tuseFrame(() => {\r\n\t\tif (analysis) {\r\n\t\t\tlet current, next, dur;\r\n\t\t\t// console.log(\"ANALYSIS: \", analysis);\r\n\t\t\t// console.log(props.time.current);\r\n\t\t\tif (segmentIndex < analysis.segments.length - 1) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tanalysis.segments[segmentIndex + 1].start * 1000 <\r\n\t\t\t\t\tprops.time.current\r\n\t\t\t\t) {\r\n\t\t\t\t\tsetSegmentIndex(segmentIndex + 1);\r\n\t\t\t\t\tcurrent = analysis.segments[segmentIndex];\r\n\t\t\t\t\tdur = current.duration;\r\n\t\t\t\t\tnext = analysis.segments[segmentIndex + 1];\r\n\t\t\t\t\t// console.log(\"CURRENT SEGMENT: \", current);\r\n\t\t\t\t\t// console.log(\"SEGMENT DURATION: \", dur);\r\n\t\t\t\t\t// console.log(\"NEXT SEGMENT: \", next);\r\n\t\t\t\t\tsetSegmentAnimation({\r\n\t\t\t\t\t\tfrom: current,\r\n\t\t\t\t\t\tto: next,\r\n\t\t\t\t\t\tduration: dur,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tmesh.current.rotation.x += segmentAnimation.to ? segmentAnimation.to.pitches[\r\n\t\t\tprops.pitchToRotateIndex.x\r\n\t\t] / 10 : .05\r\n\r\n\t\tmesh.current.rotation.y += segmentAnimation.to ? segmentAnimation.to.pitches[\r\n\t\t\tprops.pitchToRotateIndex.y\r\n\t\t] / 10 : .05\r\n\r\n\t\tmesh.current.rotation.z += segmentAnimation.to ? segmentAnimation.to.pitches[\r\n\t\t\tprops.pitchToRotateIndex.z\r\n\t\t] / 10 : .05\r\n\t\t\r\n\t});\r\n\r\n\tconst animatedVals = useSpring({\r\n\t\tto: {\r\n\t\t\tscale: segmentAnimation.to\r\n\t\t\t\t? [\r\n\t\t\t\t\t\t.5 + 1.75 *\r\n\t\t\t\t\t\t\tsegmentAnimation.to.pitches[\r\n\t\t\t\t\t\t\t\tprops.pitchToScaleIndex.x\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t.5 + 1.75 *\r\n\t\t\t\t\t\t\tsegmentAnimation.to.pitches[\r\n\t\t\t\t\t\t\t\tprops.pitchToScaleIndex.y\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t.5 + 1.75 *\r\n\t\t\t\t\t\t\tsegmentAnimation.to.pitches[\r\n\t\t\t\t\t\t\t\tprops.pitchToScaleIndex.z\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t  ]\r\n\t\t\t\t: [1, 1, 1],\r\n\t\t},\r\n\t\tconfig: config.wobbly,\r\n\t});\r\n\r\n\treturn (\r\n\t\t<animated.mesh\r\n\t\t\t{...animatedVals}\r\n\t\t\t{...props}\r\n\t\t\tref={mesh}\r\n\t\t\tonClick={(e) => setActive(!active)}\r\n\t\t\tonPointerOver={(e) => setHover(true)}\r\n\t\t\tonPointerOut={(e) => setHover(false)}\r\n\t\t\t// onUpdate={(self) => console.log(\"PROPS HAVE BEEN UPDATED\")}\r\n\t\t>\r\n\t\t\t<boxBufferGeometry args={[1, 1, 1]} />\r\n\t\t\t{/* <meshPhysicalMaterial attach=\"material\" color={props.color} /> */}\r\n\t\t\t<MeshWobbleMaterial attach=\"material\" factor={.1} color={props.color}/>\r\n\t\t</animated.mesh>\r\n\t);\r\n}","import React, { useRef, useState, useEffect } from \"react\";\r\nimport { Canvas, useFrame } from \"react-three-fiber\";\r\nimport { useSpring, animated, config } from \"react-spring/three\";\r\nimport { MeshDistortMaterial, OrbitControls, Sky } from 'drei'\r\nimport Box from './Box'\r\nimport Glob from './Glob'\r\n\r\nconst boxes = [\r\n\t{\r\n\t\tpitchToScaleIndex: {\r\n\t\t\tx: 0,\r\n\t\t\ty: 2,\r\n\t\t\tz: 4\r\n\t\t},\r\n\t\tpitchToRotateIndex: {\r\n\t\t\tx: 1,\r\n\t\t\ty: 3,\r\n\t\t\tz: 5\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tpitchToScaleIndex: {\r\n\t\t\tx: 1,\r\n\t\t\ty: 3,\r\n\t\t\tz: 5\r\n\t\t},\r\n\t\tpitchToRotateIndex: {\r\n\t\t\tx: 0,\r\n\t\t\ty: 2,\r\n\t\t\tz: 4\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tpitchToScaleIndex: {\r\n\t\t\tx: 2,\r\n\t\t\ty: 4,\r\n\t\t\tz: 6\r\n\t\t},\r\n\t\tpitchToRotateIndex: {\r\n\t\t\tx: 3,\r\n\t\t\ty: 5,\r\n\t\t\tz: 7\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tpitchToScaleIndex: {\r\n\t\t\tx: 3,\r\n\t\t\ty: 5,\r\n\t\t\tz: 7\r\n\t\t},\r\n\t\tpitchToRotateIndex: {\r\n\t\t\tx: 2,\r\n\t\t\ty: 4,\r\n\t\t\tz: 6\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tpitchToScaleIndex: {\r\n\t\t\tx: 4,\r\n\t\t\ty: 6,\r\n\t\t\tz: 8\r\n\t\t},\r\n\t\tpitchToRotateIndex: {\r\n\t\t\tx: 5,\r\n\t\t\ty: 7,\r\n\t\t\tz: 9\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tpitchToScaleIndex: {\r\n\t\t\tx: 5,\r\n\t\t\ty: 7,\r\n\t\t\tz: 9\r\n\t\t},\r\n\t\tpitchToRotateIndex: {\r\n\t\t\tx: 4,\r\n\t\t\ty: 6,\r\n\t\t\tz: 8\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tpitchToScaleIndex: {\r\n\t\t\tx: 6,\r\n\t\t\ty: 8,\r\n\t\t\tz: 10\r\n\t\t},\r\n\t\tpitchToRotateIndex: {\r\n\t\t\tx: 7,\r\n\t\t\ty: 9,\r\n\t\t\tz: 11\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tpitchToScaleIndex: {\r\n\t\t\tx: 7,\r\n\t\t\ty: 9,\r\n\t\t\tz: 11\r\n\t\t},\r\n\t\tpitchToRotateIndex: {\r\n\t\t\tx: 6,\r\n\t\t\ty: 8,\r\n\t\t\tz: 10\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tpitchToScaleIndex: {\r\n\t\t\tx: 8,\r\n\t\t\ty: 10,\r\n\t\t\tz: 0\r\n\t\t},\r\n\t\tpitchToRotateIndex: {\r\n\t\t\tx: 9,\r\n\t\t\ty: 11,\r\n\t\t\tz: 1\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tpitchToScaleIndex: {\r\n\t\t\tx: 9,\r\n\t\t\ty: 11,\r\n\t\t\tz: 1\r\n\t\t},\r\n\t\tpitchToRotateIndex: {\r\n\t\t\tx: 8,\r\n\t\t\ty: 10,\r\n\t\t\tz: 0\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tpitchToScaleIndex: {\r\n\t\t\tx: 10,\r\n\t\t\ty: 0,\r\n\t\t\tz: 4\r\n\t\t},\r\n\t\tpitchToRotateIndex: {\r\n\t\t\tx: 11,\r\n\t\t\ty: 1,\r\n\t\t\tz: 5\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tpitchToScaleIndex: {\r\n\t\t\tx: 11,\r\n\t\t\ty: 1,\r\n\t\t\tz: 5\r\n\t\t},\r\n\t\tpitchToRotateIndex: {\r\n\t\t\tx: 10,\r\n\t\t\ty: 0,\r\n\t\t\tz: 4\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tpitchToScaleIndex: {\r\n\t\t\tx: 0,\r\n\t\t\ty: 4,\r\n\t\t\tz: 8\r\n\t\t},\r\n\t\tpitchToRotateIndex: {\r\n\t\t\tx: 1,\r\n\t\t\ty: 5,\r\n\t\t\tz: 9\r\n\t\t}\r\n\t}\r\n]\r\n\r\nconst radius = 15;\r\nconst yPerRow = [\r\n\t3,2,1,0,-1,-2,-3\r\n]\r\n// const shapesPerRow = [\r\n// \t1,\r\n// \t3,\r\n// \t7,\r\n// \t13,\r\n// \t7,\r\n// \t3,\r\n// \t1\r\n// ]\r\n// let yStart = radius\r\n\r\nconst getCirclePerimCoordinates = (quant, index, radius, start=[0,0,0] ) => {\r\n\tlet x = start[0] + radius * Math.cos(2 * Math.PI * index / quant)\r\n\tlet y = start[1] + radius \r\n\tlet z = start[1] + radius * Math.sin(2 * Math.PI * index / quant)\r\n\treturn [x,z]\r\n}\r\n\r\n// const getSphereAreaCoordinate = (h, dY, dZ, r) => {\r\n// \t// console.log(\"CURRENT Y: \", h);\r\n// \t// console.log(\"CHANGE IN Y: \", dY);\r\n// \t// console.log(\"CHANGE IN Z: \", dZ);\r\n// \tlet x = r * Math.cos(dZ) * Math.sin(dY)\r\n// \tlet y = r * Math.sin(dZ) * Math.sin(dY)\r\n// \tlet z = r * Math.cos(dY)\r\n// \treturn [x,y,z]\r\n// }\r\n\r\n// let b = 0;\r\n\r\nfunction Visualizer(props) {\r\n\tconsole.log(\"VISUALIZER WAS RENDERED\");\r\n\treturn (\r\n\t\t<Canvas camera={{\r\n\t\t\tfov: 85,\r\n\t\t\torthographic: true,\r\n\t\t\tposition: [0,0,0.01]\r\n\t\t}}>\r\n\t\t\t<OrbitControls />\r\n\t\t\t<ambientLight intensity={0.5} />\r\n\t\t\t<spotLight position={[10, 10, 10]} angle={0.15} penumbra={1} />\r\n\t\t\t{/* <pointLight position={[-10, -10, -10]} /> */}\r\n\t\t\t<pointLight\r\n\t\t\t\tdistance={20}\r\n\t\t\t\tintensity={2}\r\n\t\t\t\tposition={[1, 1, 0]}\r\n\t\t\t\tcolor=\"#D96B43\"\r\n\t\t\t/>\r\n\t\t\t<pointLight\r\n\t\t\t\tdistance={20}\r\n\t\t\t\tintensity={0.5}\r\n\t\t\t\tposition={[2, 4, 1]}\r\n\t\t\t\tcolor=\"#fff\"\r\n\t\t\t/>\r\n\t\t\t<pointLight\r\n\t\t\t\tdistance={20}\r\n\t\t\t\tintensity={1.3}\r\n\t\t\t\tposition={[2, 1, 0]}\r\n\t\t\t\tcolor=\"lightblue\"\r\n\t\t\t/>\r\n\t\t\t{\r\n\t\t\t\tyPerRow.map((Y, i) => {\r\n\r\n\t\t\t\t\treturn boxes.map((box,i) => {\r\n\t\t\t\t\t\tlet y = 5;\r\n\r\n\t\t\t\t\t\t// for (i = z; i <= -5; i--) {\r\n\t\r\n\t\t\t\t\t\t\tlet coordinate = getCirclePerimCoordinates(boxes.length, i, radius)\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\t\t\tposition={[coordinate[0], Y * 3, coordinate[1]]}\r\n\t\t\t\t\t\t\t\t\ttime={props.time}\r\n\t\t\t\t\t\t\t\t\taudioDetails={props.audioDetails}\r\n\t\t\t\t\t\t\t\t\tpitchToScaleIndex={box.pitchToScaleIndex}\r\n\t\t\t\t\t\t\t\t\tpitchToRotateIndex={box.pitchToRotateIndex}\r\n\t\t\t\t\t\t\t\t\ttrack={props.track}\r\n\t\t\t\t\t\t\t\t\tcolor={i % 2 === 0 ? \"#333\" : \"#ddd\"}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t</Canvas>\r\n\t);\r\n}\r\n\r\nexport default Visualizer;\r\n\r\n/* ANIMATION STEPS FOR VISUALIZER \r\n*******************************'\r\n\t* 1. ON EVERY FRAME get current time stamp for song\r\n\t* 2. compare current time stamp against current beat ('i') and next beat ('i + 1') to detect if new beat or not\r\n\t* 3. BEAT ANIMATED DETAILS: \r\n\t\t\t- on 'UPBEAT' - (beat-duration / 2) - grow relative to loudness, referred in 'SEGMENTS'\r\n\r\n\t\t\t*/\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport logo from \"./logo.svg\";\r\nimport axios from \"axios\";\r\nimport \"./App.scss\";\r\nimport { WebPlayerContext } from \"./context\";\r\nimport WebPlayer from \"./components/WebPlayer\";\r\nimport Visualizer from \"./components/visualizer\";\r\nimport { getProfile } from \"./functions\";\r\nfunction App() {\r\n\tconst [windowObjRef, setWindowObjRef] = useState();\r\n\tconst [profile, setProfile] = useState();\r\n\tconst {\r\n\t\tloggedIn,\r\n\t\ttokens,\r\n\t\tplayer,\r\n\t\tsetTokens,\r\n\t\ttime,\r\n\t\taudioDetails,\r\n\t\ttrack,\r\n\t} = useContext(WebPlayerContext);\r\n\r\n\tconst checkCookies = () => {\r\n\t\tlet a, b;\r\n\t\tconst cookies = document.cookie.split(\"; \");\r\n\t\tif (cookies.length > 2) {\r\n\t\t\tcookies.forEach((cookie) => {\r\n\t\t\t\tif (cookie.includes(\"a=\")) {\r\n\t\t\t\t\ta = cookie.slice(2);\r\n\t\t\t\t} else if (cookie.includes(\"b=\")) {\r\n\t\t\t\t\tb = cookie.slice(2);\r\n\t\t\t\t} else return;\r\n\t\t\t});\r\n\r\n\t\t\tsetTokens([a, b]);\r\n\t\t} else {\r\n\t\t\tsetTimeout(checkCookies, 300);\r\n\t\t}\r\n\t};\r\n\r\n\tlet uri\r\n\r\n\tconst openRequestedPopUp = (uri) => {\r\n\t\tsetWindowObjRef(\r\n\t\t\twindow.open(\r\n\t\t\t\t`${uri}login`,\r\n\t\t\t\t\"Log In To Your Spotify Account\",\r\n\t\t\t\t\"height=1200,width=800,opener\"\r\n\t\t\t)\r\n\t\t);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif ( ! '%NODE_ENV' || '%NODE_ENV%' === 'development') {\r\n\t\t\turi = 'http://localhost:8888/'\r\n\t\t}\r\n\t\telse uri = window.location.href\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (tokens.length > 0) {\r\n\t\t\tif (!loggedIn) {\r\n\t\t\t\taxios(`/refresh_token?refresh_token=${tokens[1]}`).then(\r\n\t\t\t\t\t(res) => {\r\n\t\t\t\t\t\tsetTokens((prevState) => [res.data, prevState[1]]);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\twindowObjRef && !windowObjRef.closed && windowObjRef.close();\r\n\t\t\t\t// getProfile();\r\n\r\n\t\t\t\tgetProfile(tokens[0]).then((res) => setProfile(res));\r\n\t\t\t\t// console.log(window.Spotify)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcheckCookies();\r\n\t\t}\r\n\t}, [tokens, loggedIn]);\r\n\r\n\treturn (\r\n\t\t<div className=\"App\">\r\n\t\t\t<Visualizer time={time} audioDetails={audioDetails} track={track} />\r\n\t\t\t{!loggedIn ? (\r\n\t\t\t\t<div className=\"login\">\r\n\t\t\t\t\t<div className=\"login--step\">\r\n\t\t\t\t\t\t<p className=\"login--step--num\">1.</p>\r\n\t\t\t\t\t\t<p className=\"login--step--text\">\r\n\t\t\t\t\t\t\tLogin to your Spotify Account:\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"login--btn\"\r\n\t\t\t\t\t\t\tonClick={() => openRequestedPopUp(uri)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tLogin\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"login--step\">\r\n\t\t\t\t\t\t<p className=\"login--step--num\">2.</p>\r\n\t\t\t\t\t\t<p className=\"login--step--text\">\r\n\t\t\t\t\t\t\tSelect <span>\"Chromesthetics\"</span> as a listening device in the Spotify app\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"login--step\">\r\n\t\t\t\t\t<p className=\"login--step--num\">3.</p>\r\n\t\t\t\t\t<p className=\"login--step--text\">\r\n\t\t\t\t\t\tEnjoy!\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<p style={{ display: \"none\" }}>you are already logged in!</p>\r\n\t\t\t)}\r\n\t\t\t{/* \r\n\t\t\t\t{tokens && (\r\n\t\t\t\t\t<div className=\"oath\">\r\n\t\t\t\t\t\t<p className=\"access-token\">{tokens[0]}</p>\r\n\t\t\t\t\t\t<p className=\"refresh-token\">{tokens[1]}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{profile && (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<p>Email: {profile.email}</p>\r\n\t\t\t\t\t\t<p>Display Name: {profile.display_name}</p>\r\n\t\t\t\t\t\t<button onClick={e => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}}>Get currently playing song</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)} */}\r\n\t\t\t{loggedIn && player && <WebPlayer />}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport WebPlayerContext from './context';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <WebPlayerContext>\r\n        <App />\r\n    </WebPlayerContext>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";"],"sourceRoot":""}